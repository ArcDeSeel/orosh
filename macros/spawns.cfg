#Spawning macros for Orosh and Deep Shrine

#define DOV_UNIT TYPE X Y 
	[unit]
		side=4
		type={TYPE}
		x={X}
		y={Y}
		moves=0
		random_traits=no
	[/unit]
#enddef

#define BORDER_1 TYPE
	{DOV_UNIT {TYPE} 6 18}
	{DOV_UNIT {TYPE} 25 14}
	{DOV_UNIT {TYPE} 11 2}
#enddef

#define BORDER_2 TYPE
	{DOV_UNIT {TYPE} 6 18}
	{DOV_UNIT {TYPE} 25 14}
	{DOV_UNIT {TYPE} 11 2}
	{DOV_UNIT {TYPE} 18 20}
	{DOV_UNIT {TYPE} 21 4}
	{DOV_UNIT {TYPE} 3 10}
#enddef

#define LAND_A_1 TYPE
	{DOV_UNIT {TYPE} 3 14}
	{DOV_UNIT {TYPE} 22 18}
	{DOV_UNIT {TYPE} 17 2}
#enddef

#define LAND_A_2 TYPE
	{DOV_UNIT {TYPE} 4 16}
	{DOV_UNIT {TYPE} 3 13}
	{DOV_UNIT {TYPE} 21 19}
	{DOV_UNIT {TYPE} 24 16}
	{DOV_UNIT {TYPE} 18 2}
	{DOV_UNIT {TYPE} 14 2}
#enddef
	
#define LAND_A_3 TYPE
	{DOV_UNIT {TYPE} 3 12}
	{DOV_UNIT {TYPE} 3 15}
	{DOV_UNIT {TYPE} 5 17}
	{DOV_UNIT {TYPE} 20 19}
	{DOV_UNIT {TYPE} 23 18}
	{DOV_UNIT {TYPE} 24 15}
	{DOV_UNIT {TYPE} 19 3}
	{DOV_UNIT {TYPE} 16 2}
	{DOV_UNIT {TYPE} 13 2}
#enddef
	
#define LAND_B_1 TYPE
	{DOV_UNIT {TYPE} 11 21}
	{DOV_UNIT {TYPE} 25 8}
	{DOV_UNIT {TYPE} 5 5}
#enddef
	
#define LAND_B_2 TYPE
	{DOV_UNIT {TYPE} 10 20}
	{DOV_UNIT {TYPE} 13 21}
	{DOV_UNIT {TYPE} 25 9}
	{DOV_UNIT {TYPE} 24 6}
	{DOV_UNIT {TYPE} 6 4}
	{DOV_UNIT {TYPE} 4 6}
#enddef
	
#define LAND_B_3 TYPE
	{DOV_UNIT {TYPE} 9 20}
	{DOV_UNIT {TYPE} 15 21}
	{DOV_UNIT {TYPE} 12 20}
	{DOV_UNIT {TYPE} 24 7}
	{DOV_UNIT {TYPE} 25 10}
	{DOV_UNIT {TYPE} 23 5}
	{DOV_UNIT {TYPE} 7 4}
	{DOV_UNIT {TYPE} 5 6}
	{DOV_UNIT {TYPE} 3 8}
#enddef

#define DOV_WAVE TURN_NUMBER WAVE_ACTIONS
	[event]
		name=turn refresh
		first_time_only=no
		[if]
			[variable]
				name=side_number
				equals=1
			[/variable]
		[and]
			[variable]
				name=turn_number
				equals={TURN_NUMBER}
			[/variable]
		[/and]
		[then]
			{WAVE_ACTIONS}
			{SET_LABEL 14 0 "$next_wave_label"}
			{SET_LABEL 14 21 "$next_wave_label"}
		[/then]
		[/if]
	[/event]
#enddef

#define GET_NEW_LEADER LEVEL SIDE
      [have_unit]
         side={SIDE}
         canrecruit=0
         level={LEVEL}
      [/have_unit]
   [then]
      [store_unit]
         [filter]
            side={SIDE}
            canrecruit=0
            level={LEVEL}
         [/filter]
         variable=side{SIDE}_array
         kill=no
	 [message]
 	     speaker=unit
 	     message= _ "Yay! I'm the new leader!"
	 [/message]
      [/store_unit]
      [set_variable]
         name=side{SIDE}_array[0].canrecruit
         value=1
      [/set_variable]
      [set_variable]
         name=side{SIDE}_array[0].upkeep
         value=free
      [/set_variable]
      [unstore_unit]
         variable=side{SIDE}_array[0]
      [/unstore_unit]
   [/then]
#enddef

#define GET_BEST_LEADER SIDE
   [if]
      {GET_NEW_LEADER 4 {SIDE}}
   [else]
      [if]
         {GET_NEW_LEADER 3 {SIDE}}
      [else]
         [if]
            {GET_NEW_LEADER 2 {SIDE}}
         [else]
            [if]
               {GET_NEW_LEADER 1 {SIDE}}
            [else]
               [if]
                  {GET_NEW_LEADER 0 {SIDE}}
               [/if]
            [/else]
            [/if]
         [/else]
         [/if]
      [/else]
      [/if]     
   [/else]
   [/if]
   [clear_variable]
      name=side{SIDE}_array
   [/clear_variable]
#enddef

#define RESPAWN_LEADER SIDE
   [event]
      name=die
      first_time_only=no
      [filter]
         canrecruit=1
         side={SIDE}
      [/filter]
      [message]
            speaker=unit
            message= _ "Yay! A new leader!"
      [/message]
# .. // {GET_BEST_LEADER {SIDE}}
   [/event]
#enddef
